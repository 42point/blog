machine:
  environment:
    USER_NAME: 42point
    USER_EMAIL: lexx@42point.com
  ruby:
    version: 2.4.1
  node:
    version: 8.2.1

dependencies:
  pre:
    - ./bin/setup

test:
  post:
    - bundle exec jekyll build
    - rm -R ./_site/node_modules
    - bundle exec htmlproofer ./_site --only-4xx --allow-hash-href --assume-extension --check-opengraph --url-ignore "feed.xml"

deployment:
  production:
    branch: master
    commands:
      - ./bin/automated